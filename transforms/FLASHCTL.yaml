# Transform for FLASHCTL registers based on FLASHCTL on G350x
transforms:
  - !DeleteUselessEnums

  - !DeleteFieldsets
    from: .*
    useless: true

  # However DeleteUselessEnums does not delete MIS and IMASK (due to CLR being 0 and SET being 1)
  - !DeleteEnumsWithVariants
    variants:
      0: CLR
      1: SET

  - !DeleteEnumsWithVariants
    variants:
      0: CLEARED
      1: SET

  # INTEVAL is useless
  - !DeleteEnumsWithVariants
    variants:
      0: DISABLE
      1: EVAL

  # Remove FLASHCTL_ prefixes
  - !RenameRegisters
    block: .*
    from: FLASHCTL_(.+)
    to: $1

  - !RenameFields
    fieldset: .*
    from: FLASHCTL_(.+)
    to: $1

  - !Rename
    type: All
    from: FLASHCTL_(.+)
    to: $1

  # These interrupt fields are all the same layout.
  - !MergeFieldsets
    from: (IMASK|ISET|MIS|RIS|ICLR)
    to: INT
    check: NoCheck

  ## EVT_MODE
  - !MergeEnums
    from: (INT|EVT)(\d+)_CFG
    to: EVT_CFG

  ## Delete broken BANKNOTINRD enum - values don't fit bit size
  - !DeleteEnums
    from: BANKNOTINRD

  ## Cleanup
  - !Sort
